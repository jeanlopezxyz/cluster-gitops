# Default values for etcd-backup chart

# Global configuration
global:
  enabled: true

# Namespace configuration
namespace:
  create: true
  name: "etcd-backup"
  displayName: "ETCD Backup Automation"
  description: "OpenShift ETCD Backup Automation Tool"

# ServiceAccount configuration
serviceAccount:
  name: "etcd-backup"

# RBAC configuration
rbac:
  clusterRole:
    name: "cluster-etcd-backup"
  clusterRoleBinding:
    name: "etcd-backup"
  privilegedBinding:
    name: "etcd-backup-scc-privileged"

# Storage configuration
storage:
  pvc:
    name: "etcd-backup"
    accessMode: "ReadWriteOnce"
    size: "100Gi"
    storageClass: "gp3-csi"
  pv:
    enabled: false
    name: "etcd-backup"
    storageClass: "gp3-csi"
    accessMode: "ReadWriteOnce"
    size: "100Gi"
    nfs:
      server: ""
      path: ""

# Backup CronJob configuration
backup:
  enabled: true
  name: "etcd-backup"
  schedule: "0 */4 * * *"  # Every 4 hours
  retention: 30            # Days to keep backups
  mountPath: "/etcd-backup"
  image: "registry.redhat.io/openshift4/ose-cli"
  
  # Job resource limits
  resources:
    limits:
      cpu: "100m"
      memory: "256Mi"
    requests:
      cpu: "50m"
      memory: "128Mi"

# Key Pruner CronJob configuration (removes old keys from backup files)
keyPruner:
  enabled: true
  name: "key-pruner"
  schedule: "55 */6 * * *"  # Every 6 hours at minute 55
  retention: 30             # Days to keep keys
  image: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:2f47a31e743f4640016a795e317bd960b0480e0ce56f0cc5de15aa776eaa55b3"
  
  # Job resource limits
  resources:
    limits:
      cpu: "100m"
      memory: "256Mi"
    requests:
      cpu: "50m"
      memory: "128Mi"

# Security context
securityContext:
  privileged: true
  runAsUser: 0