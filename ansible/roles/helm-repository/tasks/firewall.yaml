---
# Firewall configuration tasks
# Red Hat Consulting

- name: Open firewall port for Helm repository
  ansible.posix.firewalld:
    port: "{{ helm_repo.chartmuseum.port }}/tcp"
    permanent: true
    state: enabled
    zone: "{{ firewall.zone | default('public') }}"
  become: true
  notify: Reload firewalld

- name: Reload firewalld immediately
  ansible.builtin.systemd:
    name: firewalld
    state: reloaded
  become: true
