---
# Deploy Helm Repository on Bastion (Nginx-based)
# Red Hat Consulting

- name: Deploy Helm Chart Repository on Bastion
  hosts: bastion
  gather_facts: true

  pre_tasks:
    - name: Verify target host
      ansible.builtin.debug:
        msg: "ğŸš€ Deploying Helm repository on {{ inventory_hostname }} ({{ ansible_host }})"

  roles:
    - helm-repository

  post_tasks:
    - name: Display repository information
      ansible.builtin.debug:
        msg: |
          ========================================
          âœ… Helm Repository Ready!
          ========================================

          ğŸ“ Repository URL:
            http://{{ ansible_host }}:{{ helm_repo.port }}

          ğŸ“ To add this repository:
            helm repo add day2-charts http://{{ ansible_host }}:{{ helm_repo.port }}
            helm repo update

          ğŸ” To verify:
            helm search repo day2-charts

          ========================================
